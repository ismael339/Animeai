<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6HSE98W5M7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-6HSE98W5M7');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO OPTIMIZADO PARA MÚLTIPLES PAÍSES -->
    <title>AnimeAI - Find Your Perfect Anime with AI | Watch 40,000+ Animes Free Online</title>
    <meta name="description" content="Discover your ideal anime with AI-powered search! Browse 40,000+ animes in English, Spanish & more. Describe what you want and watch free online. Legal & streaming options available.">
    <meta name="keywords" content="anime, watch anime free, anime search, AI anime finder, anime online, isekai, shounen, romance anime, action anime, ver anime gratis, buscar anime, anime recommendations, anime castellano, animes en español, best anime, anime streaming">
    <meta name="author" content="AnimeAI">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="language" content="English, Spanish">
    <meta name="geo.region" content="US, ES, IN, SA, CA, TH">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://animeai-psi.vercel.app/">
    <meta property="og:title" content="AnimeAI - Find Your Perfect Anime with AI | 40,000+ Animes">
    <meta property="og:description" content="Search 40,000+ animes by describing what you want in any language. Watch free online with legal & streaming options!">
    <meta property="og:image" content="https://animeai-psi.vercel.app/og-image.jpg">
    <meta property="og:site_name" content="AnimeAI">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="es_ES">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://animeai-psi.vercel.app/">
    <meta property="twitter:title" content="AnimeAI - AI-Powered Anime Search Engine">
    <meta property="twitter:description" content="Find and watch your ideal anime from 40,000+ titles. Describe in any language!">
    <meta property="twitter:image" content="https://animeai-psi.vercel.app/twitter-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://animeai-psi.vercel.app/">
    
    <!-- Alternate Languages -->
    <link rel="alternate" hreflang="en" href="https://animeai-psi.vercel.app/">
    <link rel="alternate" hreflang="es" href="https://animeai-psi.vercel.app/">
    <link rel="alternate" hreflang="x-default" href="https://animeai-psi.vercel.app/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Structured Data (Schema.org) para SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "AnimeAI",
      "alternateName": "Anime AI Finder",
      "description": "AI-powered anime search engine to find and watch your perfect anime from 40,000+ titles",
      "url": "https://animeai-psi.vercel.app/",
      "applicationCategory": "Entertainment",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "AnimeAI"
      },
      "inLanguage": ["en", "es"],
      "featureList": [
        "AI-powered anime search",
        "40,000+ anime database",
        "Multi-language support",
        "Free streaming links",
        "Personalized recommendations"
      ]
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "How does AnimeAI work?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "AnimeAI uses artificial intelligence to understand your description and find the perfect anime. Simply describe what you want to watch in English, Spanish, or any language, and our AI will search through 40,000+ animes to find matches."
        }
      }, {
        "@type": "Question",
        "name": "Is AnimeAI free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! AnimeAI is completely free. You can search unlimited animes and get streaming links at no cost."
        }
      }, {
        "@type": "Question",
        "name": "Can I watch anime for free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, AnimeAI provides links to both legal streaming platforms and free anime websites where you can watch your favorite shows."
        }
      }]
    }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --warning: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --dark: #0a0e27;
            --dark-light: #16213e;
            --dark-lighter: #1f2937;
            --text-primary: #ffffff;
            --text-secondary: #b8c6db;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(45deg, #0a0e27, #16213e, #0f0f23, #1a1a2e);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
        }
        
        .bg-animation::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(245, 87, 108, 0.1) 0%, transparent 50%);
            animation: float 15s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1rem 2rem;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav-btn {
            padding: 0.6rem 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
        }

        .nav-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            color: var(--text-primary);
            transform: translateY(-2px);
        }
        
        .main {
            padding-top: 100px;
            min-height: 100vh;
        }
        
        .hero {
            text-align: center;
            padding: 3rem 2rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            animation: fadeInDown 0.8s ease;
        }

        .hero-badge span {
            background: var(--accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .hero h1 {
            font-family: 'Poppins', sans-serif;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            animation: fadeInUp 0.8s ease;
        }
        
        .hero-subtitle {
            font-size: clamp(1.1rem, 2vw, 1.4rem);
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-weight: 400;
            animation: fadeInUp 0.8s ease 0.2s backwards;
        }

        .hero-features {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
            animation: fadeInUp 0.8s ease 0.3s backwards;
        }

        .hero-feature {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .hero-feature::before {
            content: '✓';
            width: 24px;
            height: 24px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.8rem;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
            flex-wrap: wrap;
            animation: fadeInUp 0.8s ease 0.4s backwards;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            background: var(--accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
        }
        
        .search-section {
            max-width: 900px;
            margin: 3rem auto 4rem;
            padding: 0 2rem;
            animation: fadeInUp 0.8s ease 0.5s backwards;
        }
        
        .search-container {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: var(--shadow);
        }

        .search-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .search-input {
            width: 100%;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid var(--glass-border);
            border-radius: 16px;
            color: var(--text-primary);
            font-size: 1.05rem;
            font-family: inherit;
            resize: vertical;
            min-height: 130px;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 25px rgba(102, 126, 234, 0.4);
            background: rgba(255, 255, 255, 0.12);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }
        
        .search-btn {
            width: 100%;
            margin-top: 1.5rem;
            padding: 1.2rem 2rem;
            background: var(--primary);
            border: none;
            border-radius: 14px;
            color: white;
            font-size: 1.15rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .search-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.5);
        }

        .search-btn:active {
            transform: translateY(-1px);
        }
        
        .search-btn.loading .btn-text {
            opacity: 0;
        }
        
        .search-btn.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 24px;
            height: 24px;
            margin: -12px 0 0 -12px;
            border: 3px solid transparent;
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .examples {
            margin-top: 2rem;
        }
        
        .examples h3 {
            color: var(--text-secondary);
            margin-bottom: 1.2rem;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
        }
        
        .example-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.7rem;
            justify-content: center;
        }
        
        .example-tag {
            padding: 0.6rem 1.2rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .example-tag:hover {
            background: rgba(102, 126, 234, 0.25);
            color: var(--text-primary);
            transform: translateY(-2px);
            border-color: rgba(102, 126, 234, 0.5);
        }

        .browse-section {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .browse-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .browse-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            background: var(--warning);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .browse-card p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .browse-btn {
            display: inline-block;
            padding: 1rem 2.5rem;
            background: var(--warning);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(245, 87, 108, 0.3);
        }

        .browse-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(245, 87, 108, 0.5);
        }
        
        .results {
            max-width: 1400px;
            margin: 4rem auto 0;
            padding: 0 2rem;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
            display: none;
        }
        
        .results.show {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        
        .match-info {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            font-size: 1.15rem;
        }
        
        .anime-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2.5rem;
            margin-bottom: 4rem;
        }
        
        .anime-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .anime-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 25px 50px rgba(31, 38, 135, 0.5);
            border-color: rgba(102, 126, 234, 0.5);
        }

        .anime-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .anime-card:hover .anime-image {
            transform: scale(1.05);
        }

        .anime-content {
            padding: 1.8rem;
        }
        
        .match-score {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(102, 126, 234, 0.95);
            backdrop-filter: blur(10px);
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            color: white;
            z-index: 1;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .anime-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            line-height: 1.3;
            color: var(--text-primary);
        }
        
        .anime-genres {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.2rem;
        }
        
        .genre-tag {
            padding: 0.3rem 0.8rem;
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.4);
            border-radius: 15px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .anime-description {
            color: var(--text-secondary);
            margin-bottom: 1.2rem;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .anime-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
            flex-wrap: wrap;
            gap: 0.7rem;
            padding-top: 1.2rem;
            border-top: 1px solid var(--glass-border);
        }

        .anime-links {
            display: flex;
            gap: 0.7rem;
            margin-top: 1.2rem;
        }

        .anime-link {
            flex: 1;
            padding: 0.7rem;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .anime-link.mal {
            background: var(--accent);
        }

        .anime-link.watch {
            background: var(--success);
        }

        .anime-link:hover {
            opacity: 0.85;
            transform: translateY(-2px);
        }

        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .history-modal.show {
            display: flex;
        }

        .history-content {
            background: var(--dark-light);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .history-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-secondary);
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 87, 87, 0.2);
            color: #ff5757;
        }

        .history-item {
            padding: 1.2rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(5px);
        }

        .history-query {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .history-date {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .footer {
            background: var(--dark-lighter);
            padding: 3rem 2rem 2rem;
            text-align: center;
            border-top: 1px solid var(--glass-border);
            margin-top: 5rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .footer-link:hover {
            color: var(--text-primary);
        }

        @media (max-width: 768px) {
            .anime-grid {
                grid-template-columns: 1fr;
            }
            .anime-links {
                flex-direction: column;
            }
            .hero-features {
                flex-direction: column;
                align-items: center;
            }
            .stats {
                gap: 2rem;
            }
            .nav-buttons {
                gap: 0.5rem;
            }
            .logo {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    
    <header class="header">
    <nav class="nav">
        <div class="logo">🎌 AnimeAI</div>
        <div class="nav-buttons">
            <button class="nav-btn" id="historyBtn">📜 History</button>
            <a href="https://ww3.animeonline.ninja/genero/anime-castellano/" target="_blank" rel="noopener" class="nav-btn">🌐 Browse All Animes</a>
            <!-- NUEVO BOTÓN -->
            <a href="imagenai.html" class="nav-btn nav-btn-ia">✨ AI Images</a>
        </div>
    </nav>
</header>

<style>
    .nav-buttons {
        gap: 0.5rem;
    }
    .logo {
        font-size: 1.5rem;
    }

    /* Botón especial para Imágenes IA */
    .nav-btn-ia {
        background: var(--accent);
        color: white;
        font-weight: 700;
        box-shadow: 0 8px 25px rgba(0, 242, 254, 0.3);
        border: none;
        transition: all 0.3s ease;
    }

    .nav-btn-ia:hover {
        background: linear-gradient(135deg, #00f2fe 0%, #4facfe 100%);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 12px 30px rgba(0, 242, 254, 0.5);
    }
</style>

<div class="bg-animation"></div>

    <!-- MAIN CONTENT -->
    <main class="main">
        <!-- HERO SECTION -->
        <section class="hero">
            <div class="hero-badge">
                🤖 <span>AI-Powered</span> Anime Discovery
            </div>
            
            <h1>Find Your Perfect Anime<br>Watch Free Online</h1>
            
            <p class="hero-subtitle">
                Search through 40,000+ animes by describing what you want in <strong>any language</strong><br>
                (English, Spanish, Hindi, Arabic & more) - AI will find your ideal match!
            </p>
            
            <div class="hero-features">
                <div class="hero-feature">40,000+ Anime Database</div>
                <div class="hero-feature">Multi-Language Search</div>
                <div class="hero-feature">Free Streaming Links</div>
                <div class="hero-feature">Legal & Alternative Options</div>
            </div>
            
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number">40,000+</span>
                    <span class="stat-label">Total Animes</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="searchCount">0</span>
                    <span class="stat-label">Searches Made</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Always Available</span>
                </div>
            </div>
        </section>
        
        <!-- SEARCH SECTION -->
        <section class="search-section">
            <div class="search-container">
                <label class="search-label">
                    🔍 Describe Your Ideal Anime (English/Spanish/Any Language)
                </label>
                <form id="searchForm">
                    <textarea 
                        id="searchInput"
                        class="search-input" 
                        placeholder="Example in English: 'brutal action anime with overpowered mc, fire powers, epic battles, shounen, amazing animation'

Or in Spanish: 'anime de acción brutal con protagonista op, poderes de fuego, peleas épicas, buena animación, isekai'

Or in Hindi: 'शक्तिशाली नायक के साथ एक्शन एनीमे'

Describe in ANY language - our AI understands them all!"
                        required
                    ></textarea>
                    <button type="submit" class="search-btn" id="searchBtn">
                        <span class="btn-text">🚀 Search with AI</span>
                    </button>
                </form>
                
                <div class="examples">
                    <h3>🔥 Popular Search Examples (Click to Use)</h3>
                    <div class="example-tags">
                        <span class="example-tag" data-text="dark fantasy anime with epic magic battles, medieval world, dragons, overpowered mc, brutal action">🐉 Epic Dark Fantasy</span>
                        <span class="example-tag" data-text="anime de romance escolar con comedia, personajes tsundere, triángulos amorosos, slice of life">💕 School Romance (ES)</span>
                        <span class="example-tag" data-text="brutal shounen action with supernatural powers, intense fights, overpowered protagonist, training arc">⚔️ OP Protagonist</span>
                        <span class="example-tag" data-text="psychological thriller dark anime, plot twists, mystery, suspense, mature, seinen">🧠 Mind-Bending Thriller</span>
                        <span class="example-tag" data-text="isekai with reincarnation, fantasy world, magic system, harem, adventure, leveling">🌍 Isekai Adventure</span>
                        <span class="example-tag" data-text="sports anime with personal growth, teamwork, competition, inspirational, tournament arc">⚽ Sports Excellence</span>
                        <span class="example-tag" data-text="mecha anime with giant robots, space battles, war, military, sci-fi, epic">🤖 Mecha Warfare</span>
                        <span class="example-tag" data-text="slice of life anime relaxing, daily life, comedy, heartwarming, school, friendship">🌸 Slice of Life</span>
                        <span class="example-tag" data-text="horror anime scary, gore, psychological, dark, suspense, monsters, supernatural">👻 Horror & Gore</span>
                        <span class="example-tag" data-text="music anime with idol, band, singing, performance, drama, slice of life">🎵 Music & Idols</span>
                        <span class="example-tag" data-text="samurai anime historical, sword fights, katana, bushido, edo period, action">⚔️ Samurai Warriors</span>
                        <span class="example-tag" data-text="vampire anime with blood, supernatural, dark fantasy, gothic, romance">🧛 Vampire Tales</span>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- BROWSE ALL ANIMES SECTION -->
        <section class="browse-section">
            <div class="browse-card">
                <h3>🎬 Can't Decide? Browse All Animes!</h3>
                <p>
                    <strong>Explore our complete anime catalog</strong> with thousands of titles in Spanish (castellano) and other languages. 
                    Find classics, new releases, and hidden gems. <br>
                    <em>Both legal streaming platforms and free alternatives available!</em>
                </p>
                <a href="https://ww3.animeonline.ninja/genero/anime-castellano/" target="_blank" rel="noopener" class="browse-btn">
                    🌐 Browse Complete Anime Collection
                </a>
            </div>
        </section>
        
        <!-- RESULTS SECTION -->
        <section class="results" id="results">
            <p class="match-info" id="matchInfo"></p>
            <div class="anime-grid" id="animeGrid"></div>
        </section>
    </main>

    <!-- HISTORY MODAL -->
    <div class="history-modal" id="historyModal">
        <div class="history-content">
            <div class="history-header">
                <h2 class="history-title">📜 Search History</h2>
                <button class="close-btn" id="closeHistory">✕</button>
            </div>
            <div id="historyList"></div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <p><strong>AnimeAI</strong> - Your AI-Powered Anime Discovery Platform</p>
            <p>Search 40,000+ animes in any language. Find and watch your perfect anime free online.</p>
            <div class="footer-links">
                <a href="#" class="footer-link">About</a>
                <a href="#" class="footer-link">Privacy Policy</a>
                <a href="#" class="footer-link">Terms of Service</a>
                <a href="https://ww3.animeonline.ninja/genero/anime-castellano/" target="_blank" rel="noopener" class="footer-link">Browse All Animes</a>
                <a href="#" class="footer-link">Contact</a>
            </div>
            <p style="margin-top: 1.5rem; font-size: 0.85rem; opacity: 0.7;">
                © 2024 AnimeAI. All rights reserved. | Made with ❤️ for anime fans worldwide
            </p>
        </div>
    </footer>
    <script>
// ====================================
// SISTEMA DE SINÓNIMOS MASIVO - MULTILINGÜE
// Español, Inglés, Hindi, Árabe y más
// ====================================

const synonyms = {
  // ==================== ACCIÓN Y COMBATE ====================
  "accion": ["action", "accion", "pelea", "peleas", "batalla", "combate", "lucha", "fight", "fighting", "battle", "battles", "brawl", "warfare"],
  "action": ["action", "accion", "fight", "battle", "combat", "fighting", "battles", "warfare", "brawl", "clash"],
  "pelea": ["pelea", "peleas", "combate", "lucha", "batalla", "fight", "fighting", "martial arts", "brawl", "clash", "duel"],
  "batalla": ["batalla", "combate", "guerra", "war", "battle", "conflict", "warfare", "clash", "fight"],
  "brutal": ["brutal", "violent", "intense", "extreme", "hardcore", "gore", "bloody", "savage", "visceral", "raw", "ruthless"],
  "intenso": ["intense", "intenso", "thrilling", "extreme", "hardcore", "epic", "powerful", "gripping"],
  "epico": ["epic", "epico", "legendary", "grand", "magnificent", "spectacular", "breathtaking", "heroic", "monumental"],
  "explosivo": ["explosive", "explosivo", "dynamic", "intense", "action-packed", "thrilling", "bombastic"],
  
  // ==================== ROMANCE Y AMOR ====================
  "amor": ["romance", "amor", "pareja", "enamorado", "romantico", "love", "amoroso", "cariño", "relacion", "relationship", "romantic"],
  "romance": ["romance", "amor", "pareja", "relacion", "enamorado", "romantico", "love story", "relationship", "dating", "romantic"],
  "romantico": ["romantic", "romantico", "love", "amor", "heartwarming", "sweet", "tender", "lovely"],
  "pareja": ["couple", "pareja", "romance", "relationship", "lovers", "duo", "partners"],
  "enamorado": ["in love", "enamorado", "romantic", "lovestruck", "smitten", "infatuated"],
  "love": ["love", "amor", "romance", "romantic", "affection", "passion"],
  
  // ==================== COMEDIA Y HUMOR ====================
  "comedia": ["comedy", "comedia", "divertido", "gracioso", "humor", "funny", "risa", "chistoso", "hilarious", "comic"],
  "divertido": ["funny", "divertido", "gracioso", "entretenido", "comedy", "humor", "amusing", "entertaining", "fun"],
  "gracioso": ["funny", "gracioso", "hilarious", "humorous", "comic", "witty", "amusing", "comical"],
  "humor": ["humor", "comedy", "comedia", "funny", "wit", "jokes", "laughs"],
  "risa": ["laughter", "risa", "laughs", "comedy", "funny", "hilarious"],
  
  // ==================== DRAMA Y EMOCIONES ====================
  "drama": ["drama", "triste", "emocional", "lagrimas", "melancolico", "sad", "emotional", "tragic", "tearjerker", "heavy"],
  "triste": ["sad", "triste", "melancolico", "drama", "emotional", "depressing", "sorrowful", "melancholic", "tragic"],
  "emocional": ["emotional", "emocional", "moving", "touching", "heartfelt", "sentimental", "dramatic"],
  "lagrimas": ["tears", "lagrimas", "crying", "tearjerker", "sad", "weeping"],
  "melancolico": ["melancholic", "melancolico", "sad", "gloomy", "wistful"],
  
  // ==================== TERROR Y HORROR ====================
  "terror": ["horror", "miedo", "terror", "oscuro", "gore", "scary", "aterrador", "suspenso", "creepy", "frightening", "terrifying"],
  "miedo": ["fear", "miedo", "terror", "horror", "scary", "frightening", "dread", "afraid"],
  "oscuro": ["dark", "oscuro", "grim", "sinister", "noir", "shadowy", "gloomy", "bleak", "somber"],
  "gore": ["gore", "bloody", "violent", "graphic", "brutal", "gory", "blood"],
  "suspenso": ["suspense", "suspenso", "thriller", "tension", "mystery", "edge-of-seat"],
  "aterrador": ["terrifying", "aterrador", "scary", "frightening", "horrifying"],
  
  // ==================== MISTERIO E INVESTIGACIÓN ====================
  "misterio": ["mystery", "misterio", "detective", "investigacion", "enigma", "suspense", "puzzle", "riddle", "whodunit"],
  "detective": ["detective", "investigacion", "misterio", "mystery", "investigation", "sleuth", "noir", "inspector"],
  "investigacion": ["investigation", "investigacion", "detective", "mystery", "research", "inquiry", "probe"],
  "enigma": ["enigma", "mystery", "puzzle", "riddle", "conundrum", "mystery"],
  
  // ==================== ISEKAI Y MUNDOS ALTERNATIVOS ====================
  "isekai": ["isekai", "otro mundo", "reencarnacion", "transportado", "portal", "another world", "parallel world", "otherworld"],
  "otro mundo": ["other world", "otro mundo", "isekai", "another world", "parallel world", "alternate dimension", "fantasy world"],
  "reencarnacion": ["reincarnation", "reencarnacion", "renacido", "isekai", "reborn", "transmigration", "rebirth", "second life"],
  "transportado": ["transported", "transportado", "summoned", "isekai", "transferred", "portal"],
  "portal": ["portal", "gateway", "door", "passage", "dimensional", "wormhole"],
  "renacido": ["reborn", "renacido", "reincarnation", "second life", "new life"],
  
  // ==================== MAGIA Y FANTASÍA ====================
  "magia": ["magic", "magia", "fantasia", "magico", "hechiceria", "hechizos", "wizard", "mago", "sorcery", "mystical", "spell"],
  "fantasia": ["fantasy", "fantasia", "magia", "magico", "medieval", "magical", "mythical", "epic fantasy", "high fantasy"],
  "magico": ["magical", "magico", "magic", "enchanted", "mystical", "supernatural", "mystic"],
  "hechicero": ["wizard", "sorcerer", "mage", "magician", "warlock", "hechicero", "witch"],
  "hechizos": ["spells", "hechizos", "magic", "enchantments", "incantations", "curses"],
  "medieval": ["medieval", "middle ages", "fantasy", "knights", "castles", "period"],
  "dragon": ["dragon", "dragones", "drake", "wyrm", "serpent", "beast", "wyvern"],
  "dragones": ["dragons", "dragones", "drake", "wyrm", "legendary beasts", "wyvern"],
  "elfo": ["elf", "elfo", "elven", "fairy", "fae"],
  "enano": ["dwarf", "enano", "dwarven"],
  
  // ==================== PODERES Y HABILIDADES ====================
  "poderes": ["powers", "poderes", "superpowers", "habilidades", "abilities", "supernatural", "special abilities", "superhuman"],
  "superpoderes": ["superpowers", "superpoderes", "powers", "abilities", "superhuman", "special powers", "supernatural"],
  "habilidades": ["abilities", "habilidades", "skills", "powers", "talents", "capabilities", "prowess"],
  "sobrenatural": ["supernatural", "sobrenatural", "paranormal", "mystical", "otherworldly", "paranormal", "occult"],
  "fuego": ["fire", "fuego", "flames", "pyro", "burning", "inferno", "blaze", "flame"],
  "hielo": ["ice", "hielo", "frost", "frozen", "cold", "glacial", "cryomancy", "freeze"],
  "rayo": ["lightning", "rayo", "thunder", "electricity", "electric", "bolt", "thunderbolt"],
  "agua": ["water", "agua", "aqua", "ocean", "hydro", "aquatic"],
  "viento": ["wind", "viento", "air", "storm", "gale", "breeze"],
  "tierra": ["earth", "tierra", "ground", "rock", "stone", "geo"],
  "luz": ["light", "luz", "holy", "radiant", "divine"],
  "oscuridad": ["darkness", "oscuridad", "shadow", "dark", "void"],
  
  // ==================== PROTAGONISTA Y PERSONAJES ====================
  "protagonista": ["protagonist", "protagonista", "hero", "main character", "mc", "lead", "hero", "main"],
  "heroe": ["hero", "heroe", "protagonist", "champion", "warrior", "savior", "main character"],
  "fuerte": ["strong", "fuerte", "powerful", "mighty", "op", "overpowered", "potent", "robust"],
  "poderoso": ["powerful", "poderoso", "strong", "mighty", "op", "overpowered", "dominant", "formidable"],
  "overpowered": ["overpowered", "op", "poderoso", "fuerte", "invincible", "unbeatable", "broken", "godlike", "too strong"],
  "op": ["op", "overpowered", "powerful", "strong", "broken", "godlike", "unbeatable", "too powerful"],
  "invencible": ["invincible", "invencible", "unbeatable", "unstoppable", "immortal", "indestructible"],
  "inteligente": ["intelligent", "inteligente", "smart", "genius", "clever", "brilliant", "wise"],
  "villano": ["villain", "villano", "antagonist", "enemy", "evil", "bad guy", "nemesis"],
  "antihéroe": ["antihero", "antiheroe", "dark hero", "flawed hero", "reluctant hero"],
  "mc": ["mc", "main character", "protagonist", "hero", "lead"],
  
  // ==================== ARMAS Y COMBATE ====================
  "espada": ["sword", "espada", "blade", "katana", "swordsman", "swordfight", "saber"],
  "katana": ["katana", "espada", "sword", "blade", "japanese sword", "samurai sword"],
  "armas": ["weapons", "armas", "arms", "arsenal", "weaponry", "armaments"],
  "arco": ["bow", "arco", "archery", "arrows", "archer"],
  "pistola": ["gun", "pistola", "firearm", "weapon", "rifle"],
  "lanza": ["spear", "lanza", "lance", "pike"],
  "hacha": ["axe", "hacha", "battle axe"],
  
  // ==================== NINJAS Y SAMURAIS ====================
  "ninja": ["ninja", "shinobi", "ninjutsu", "assassin", "stealth", "shadow warrior", "kunoichi"],
  "shinobi": ["shinobi", "ninja", "shadow warrior", "stealth", "assassin"],
  "samurai": ["samurai", "guerrero", "warrior", "bushido", "ronin", "swordsman", "swordfighter"],
  "guerrero": ["warrior", "guerrero", "fighter", "soldier", "combatant", "swordsman"],
  "ronin": ["ronin", "masterless samurai", "wandering warrior"],
  
  // ==================== MECHAS Y ROBOTS ====================
  "robot": ["mecha", "robot", "robots", "mechs", "mechanical", "android", "cyborg"],
  "mecha": ["mecha", "robot", "mechs", "giant robot", "gundam", "mechanical", "mobile suit"],
  "mecanico": ["mechanical", "mecanico", "mecha", "tech", "machinery", "robotic"],
  "gundam": ["gundam", "mecha", "mobile suit", "robot"],
  
  // ==================== CIENCIA FICCIÓN Y ESPACIO ====================
  "espacio": ["space", "espacio", "spatial", "sci-fi", "science fiction", "universe", "cosmos", "galaxy", "outer space"],
  "ciencia ficcion": ["sci-fi", "science fiction", "ciencia ficcion", "futuristic", "technology", "space", "cyberpunk"],
  "futurista": ["futuristic", "futurista", "future", "sci-fi", "advanced", "cyberpunk"],
  "tecnologia": ["technology", "tecnologia", "tech", "futuristic", "advanced", "high-tech"],
  "universo": ["universe", "universo", "cosmos", "space", "galaxy", "cosmic"],
  "cyberpunk": ["cyberpunk", "futuristic", "dystopian", "tech", "neon"],
  
  // ==================== ESCUELA Y ESTUDIANTES ====================
  "escuela": ["school", "escuela", "academy", "estudiante", "high school", "campus", "educational", "college"],
  "estudiante": ["student", "estudiante", "school", "pupil", "scholar", "schoolboy", "schoolgirl"],
  "academia": ["academy", "academia", "school", "institute", "educational", "training"],
  "instituto": ["high school", "instituto", "school", "academy", "secondary school"],
  "universidad": ["university", "universidad", "college", "campus"],
  
  // ==================== GÉNEROS DE ANIME ====================
  "shounen": ["shounen", "shonen", "action", "adventure", "fighting", "battle", "young male", "boy"],
  "shonen": ["shonen", "shounen", "action", "fighting", "adventure", "battle"],
  "seinen": ["seinen", "mature", "adult", "psychological", "dark", "complex", "serious", "grown-up"],
  "shoujo": ["shoujo", "shojo", "romance", "love", "female protagonist", "romantic", "girl"],
  "shojo": ["shojo", "shoujo", "romance", "love", "girl", "female"],
  "josei": ["josei", "mature romance", "adult romance", "slice of life", "woman"],
  "kodomo": ["kodomo", "children", "kids", "family-friendly"],
  
  // ==================== SLICE OF LIFE ====================
  "vida diaria": ["slice of life", "vida diaria", "daily life", "everyday", "realistic", "casual", "mundane"],
  "slice of life": ["slice of life", "vida diaria", "daily", "everyday", "realistic", "casual", "relaxing", "iyashikei"],
  "cotidiano": ["everyday", "cotidiano", "daily", "routine", "ordinary", "normal"],
  "relajante": ["relaxing", "relajante", "calm", "peaceful", "chill", "soothing"],
  
  // ==================== AVENTURA Y EXPLORACIÓN ====================
  "aventura": ["adventure", "aventura", "exploration", "journey", "quest", "expedition", "voyage"],
  "exploracion": ["exploration", "exploracion", "adventure", "discovery", "journey", "expedition"],
  "viaje": ["journey", "viaje", "travel", "adventure", "voyage", "trip", "odyssey"],
  "quest": ["quest", "mission", "adventure", "journey", "task"],
  "expedicion": ["expedition", "expedicion", "journey", "adventure", "voyage"],
  
  // ==================== DEPORTES ====================
  "deportes": ["sports", "deportes", "athletics", "competition", "tournament", "athletic"],
  "deporte": ["sport", "deporte", "athletic", "competition", "game"],
  "competicion": ["competition", "competicion", "tournament", "contest", "championship", "match"],
  "torneo": ["tournament", "torneo", "competition", "championship", "contest"],
  "futbol": ["soccer", "football", "futbol"],
  "basquetbol": ["basketball", "basquetbol", "hoops"],
  "voleibol": ["volleyball", "voleibol"],
  "beisbol": ["baseball", "beisbol"],
  
  // ==================== DEMONIOS Y CRIATURAS ====================
  "demonio": ["demon", "demonio", "devil", "diablo", "evil spirit", "fiend", "daemon"],
  "diablo": ["devil", "diablo", "demon", "satan", "evil", "lucifer"],
  "vampiro": ["vampire", "vampiro", "bloodsucker", "undead", "immortal", "nosferatu"],
  "zombi": ["zombie", "zombi", "undead", "walker", "living dead"],
  "monstruo": ["monster", "monstruo", "beast", "creature", "demon", "kaiju"],
  "fantasma": ["ghost", "fantasma", "spirit", "phantom", "specter", "apparition"],
  "angel": ["angel", "angel", "divine", "celestial", "heavenly"],
  "licántropo": ["werewolf", "licantropo", "lycanthrope", "wolf"],
  
  // ==================== HISTÓRICO Y ÉPOCA ====================
  "historico": ["historical", "historico", "period", "era", "ancient", "past", "bygone"],
  "epoca": ["era", "epoca", "period", "age", "time", "epoch"],
  "antiguo": ["ancient", "antiguo", "old", "historical", "archaic", "antique"],
  "feudal": ["feudal", "medieval", "period", "historical"],
  
  // ==================== MILITAR Y GUERRA ====================
  "militar": ["military", "militar", "army", "soldiers", "warfare", "troops", "armed forces"],
  "guerra": ["war", "guerra", "warfare", "conflict", "battle", "combat", "wartime"],
  "ejercito": ["army", "ejercito", "military", "troops", "forces", "soldiers"],
  "soldado": ["soldier", "soldado", "warrior", "fighter", "trooper", "combatant"],
  "belico": ["war", "warfare", "military", "combat", "battle", "conflict", "bellic", "warlike"],
  "conflicto": ["conflict", "conflicto", "war", "battle", "warfare"],
  
  // ==================== MÚSICA E IDOLS ====================
  "musica": ["music", "musica", "musical", "band", "idol", "singer", "song", "melody"],
  "idol": ["idol", "singer", "music", "performer", "star", "celebrity"],
  "banda": ["band", "banda", "group", "music", "ensemble"],
  "cantante": ["singer", "cantante", "vocalist", "artist", "performer"],
  "concierto": ["concert", "concierto", "performance", "show", "live"],
  
  // ==================== PSICOLÓGICO ====================
  "psicologico": ["psychological", "psicologico", "mental", "mind", "thought-provoking", "cerebral", "psyche"],
  "mente": ["mind", "mente", "mental", "psychological", "psyche", "brain"],
  "mental": ["mental", "psychological", "mind", "psyche", "cerebral"],
  "complejo": ["complex", "complejo", "intricate", "complicated", "deep"],
  
  // ==================== HAREM Y ROMANCE ====================
  "harem": ["harem", "multiple girls", "reverse harem", "polygamy", "love triangle", "many girls"],
  "triangulo amoroso": ["love triangle", "triangulo amoroso", "romance", "three-way", "complicated love"],
  "tsundere": ["tsundere", "cold outside warm inside", "harsh but caring", "tough love"],
  "yandere": ["yandere", "obsessive love", "crazy love", "possessive", "psycho love"],
  "kuudere": ["kuudere", "emotionless", "cold", "stoic"],
  "dandere": ["dandere", "shy", "quiet", "timid"],
  
  // ==================== ECCHI Y FANSERVICE ====================
  "ecchi": ["ecchi", "fanservice", "suggestive", "sexy", "perverted", "lewd"],
  "fanservice": ["fanservice", "ecchi", "sexy", "suggestive", "service"],
  "hentai": ["hentai", "adult", "explicit", "nsfw"],
  
  // ==================== TONO Y ATMÓSFERA ====================
  "oscuro": ["dark", "oscuro", "grim", "noir", "sinister", "shadowy", "gloomy", "bleak", "somber"],
  "serio": ["serious", "serio", "mature", "heavy", "grave", "solemn"],
  "maduro": ["mature", "maduro", "adult", "serious", "grown-up", "sophisticated"],
  "ligero": ["light", "ligero", "casual", "easy", "relaxing", "lightweight"],
  "alegre": ["cheerful", "alegre", "happy", "upbeat", "joyful"],
  
  // ==================== VIOLENCIA Y ACCIÓN ====================
  "violento": ["violent", "violento", "brutal", "intense", "aggressive", "savage"],
  "sangriento": ["bloody", "sangriento", "gore", "violent", "graphic", "gory"],
  "grafico": ["graphic", "grafico", "explicit", "detailed", "visceral"],
  
  // ==================== TRANSFORMACIÓN Y CAMBIO ====================
  "transformacion": ["transformation", "transformacion", "change", "metamorphosis", "evolution", "power-up"],
  "evolucion": ["evolution", "evolucion", "growth", "development", "progression", "advancement"],
  "poder": ["power", "poder", "strength", "ability", "force"],
  
  // ==================== ENTRENAMIENTO Y CRECIMIENTO ====================
  "entrenamiento": ["training", "entrenamiento", "practice", "workout", "discipline", "conditioning"],
  "crecimiento": ["growth", "crecimiento", "development", "progression", "evolution", "improvement"],
  "superacion": ["overcoming", "superacion", "improvement", "growth", "progress", "self-improvement"],
  "progresion": ["progression", "progresion", "growth", "development", "advancement", "leveling"],
  "nivel": ["level", "nivel", "leveling", "power-up", "rank"],
  
  // ==================== AMISTAD Y RELACIONES ====================
  "amistad": ["friendship", "amistad", "friends", "bonds", "comradeship", "nakama", "camaraderie"],
  "nakama": ["nakama", "friends", "comrades", "companions", "crew", "comrades"],
  "equipo": ["team", "equipo", "group", "squad", "crew", "party"],
  "compañeros": ["companions", "compañeros", "comrades", "teammates", "partners", "allies"],
  "familia": ["family", "familia", "relatives", "household"],
  
  // ==================== VENGANZA Y JUSTICIA ====================
  "venganza": ["revenge", "venganza", "vengeance", "payback", "retribution", "retaliation"],
  "justicia": ["justice", "justicia", "righteous", "fair", "law", "righteousness"],
  "traicion": ["betrayal", "traicion", "backstab", "treachery", "deception", "double-cross"],
  
  // ==================== ANIMACIÓN Y CALIDAD ====================
  "animacion": ["animation", "animacion", "animated", "visuals", "art"],
  "calidad": ["quality", "calidad", "high quality", "good", "excellent"],
  "buena animacion": ["good animation", "quality animation", "beautiful", "stunning visuals", "sakuga"],
  "sakuga": ["sakuga", "amazing animation", "fluid animation", "stunning"],
  
  // ==================== ATMÓSFERA Y ESTILO ====================
  "atmosfera": ["atmosphere", "atmosfera", "mood", "ambience", "vibe", "feeling"],
  "epica": ["epic", "epica", "grand", "legendary", "magnificent"],
  "legendario": ["legendary", "legendario", "epic", "mythical", "fabled"],
  
  // ==================== TÉRMINOS EN HINDI (हिंदी) ====================
  "एक्शन": ["action", "accion", "fight", "battle"],
  "प्यार": ["love", "amor", "romance"],
  "जादू": ["magic", "magia", "magical"],
  "शक्तिशाली": ["powerful", "strong", "poderoso"],
  
  // ==================== TÉRMINOS EN ÁRABE (العربية) ====================
  "حركة": ["action", "accion"],
  "حب": ["love", "amor"],
  "سحر": ["magic", "magia"],
  "قوي": ["powerful", "strong"],
  
  // ==================== TÉRMINOS ADICIONALES ====================
  "reciente": ["recent", "new", "latest", "modern", "contemporary"],
  "nuevo": ["new", "nuevo", "recent", "latest", "fresh"],
  "popular": ["popular", "trending", "famous", "hit", "mainstream"],
  "clasico": ["classic", "clasico", "legendary", "timeless", "iconic"],
  "moderno": ["modern", "moderno", "contemporary", "current", "present-day"]
};

// ====================================
// VARIABLES GLOBALES
// ====================================

let searchHistory = [];
let searchCount = 0;

// Cargar historial del localStorage
try {
  const stored = localStorage.getItem('animeSearchHistory');
  const count = localStorage.getItem('searchCount');
  if (stored) searchHistory = JSON.parse(stored);
  if (count) {
    searchCount = parseInt(count);
    document.getElementById('searchCount').textContent = searchCount;
  }
} catch(e) {
  console.log('Error loading history');
}

// ====================================
// ELEMENTOS DEL DOM
// ====================================

const searchForm = document.getElementById("searchForm");
const searchInput = document.getElementById("searchInput");
const searchBtn = document.getElementById("searchBtn");
const animeGrid = document.getElementById("animeGrid");
const matchInfo = document.getElementById("matchInfo");
const resultsSection = document.getElementById("results");
const historyBtn = document.getElementById("historyBtn");
const historyModal = document.getElementById("historyModal");
const closeHistory = document.getElementById("closeHistory");

// ====================================
// EVENT LISTENERS
// ====================================

// Click en ejemplos
document.querySelectorAll('.example-tag').forEach(tag => {
  tag.addEventListener('click', function() {
    searchInput.value = this.getAttribute('data-text');
    searchInput.focus();
    searchInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
  });
});

// Botón historial
historyBtn.addEventListener('click', () => {
  historyModal.classList.add('show');
  displayHistory();
});

// Cerrar modal historial
closeHistory.addEventListener('click', () => {
  historyModal.classList.remove('show');
});

// Click fuera del modal
historyModal.addEventListener('click', (e) => {
  if (e.target === historyModal) {
    historyModal.classList.remove('show');
  }
});

// ====================================
// FUNCIONES DE HISTORIAL
// ====================================

function displayHistory() {
  const historyList = document.getElementById('historyList');
  if (searchHistory.length === 0) {
    historyList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No previous searches yet. Start searching to build your history!</p>';
    return;
  }
  
  historyList.innerHTML = searchHistory.map((item) => `
    <div class="history-item" data-query="${item.query.replace(/"/g, '&quot;')}">
      <div class="history-query">${item.query}</div>
      <div class="history-date">${new Date(item.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</div>
    </div>
  `).reverse().join('');

  document.querySelectorAll('.history-item').forEach(item => {
    item.addEventListener('click', function() {
      searchInput.value = this.getAttribute('data-query');
      historyModal.classList.remove('show');
      searchInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
      setTimeout(() => searchForm.dispatchEvent(new Event('submit')), 300);
    });
  });
}

function saveToHistory(query) {
  searchHistory.push({
    query: query,
    date: new Date().toISOString()
  });
  
  if (searchHistory.length > 100) {
    searchHistory = searchHistory.slice(-100);
  }
  
  try {
    localStorage.setItem('animeSearchHistory', JSON.stringify(searchHistory));
    searchCount++;
    localStorage.setItem('searchCount', searchCount.toString());
    document.getElementById('searchCount').textContent = searchCount;
  } catch(e) {
    console.log('Error saving history');
  }
}

// ====================================
// FUNCIÓN PARA ENLACES DE STREAMING
// ====================================

function getWatchLink(title) {
  const searchTitle = encodeURIComponent(title.toLowerCase().replace(/[^a-z0-9\s]/gi, ' ').trim());
  return `https://ww3.animeonline.ninja/browse?q=${searchTitle}`;
}

// ====================================
// BÚSQUEDA MEJORADA CON 40,000+ ANIMES
// ====================================

async function searchAnimeAPI(query) {
  query = query.toLowerCase().trim();
  if (!query) return [];

  const queryWords = query.split(" ").filter(w => w.length > 2);
  const expandedWords = new Set();
  
  // Expandir con sinónimos multilingües
  queryWords.forEach(word => {
    expandedWords.add(word);
    if (synonyms[word]) {
      synonyms[word].forEach(syn => expandedWords.add(syn));
    }
  });

  try {
    const allResults = [];
    const searchTerms = Array.from(expandedWords).slice(0, 12);
    
    const searches = [];
    
    // BÚSQUEDA 1: Por score (los mejores animes)
    searches.push(
      fetch(`https://api.jikan.moe/v4/anime?q=${encodeURIComponent(searchTerms.slice(0, 3).join(" "))}&limit=25&order_by=score&sort=desc`)
        .then(r => r.ok ? r.json() : {data: []})
        .catch(() => ({data: []}))
    );
    
    // BÚSQUEDA 2: Por popularidad (más vistos)
    searches.push(
      fetch(`https://api.jikan.moe/v4/anime?q=${encodeURIComponent(searchTerms.slice(3, 6).join(" "))}&limit=25&order_by=popularity&sort=asc`)
        .then(r => r.ok ? r.json() : {data: []})
        .catch(() => ({data: []}))
    );
    
    // BÚSQUEDA 3: Más recientes (nuevos lanzamientos)
    searches.push(
      fetch(`https://api.jikan.moe/v4/anime?q=${encodeURIComponent(searchTerms.slice(0, 4).join(" "))}&limit=
      25&order_by=start_date&sort=desc`)
        .then(r => r.ok ? r.json() : {data: []})
        .catch(() => ({data: []}))
    );
    
    // BÚSQUEDA 4: Por miembros (más vistos en MAL)
    searches.push(
      fetch(`https://api.jikan.moe/v4/anime?q=${encodeURIComponent(searchTerms.slice(2, 5).join(" "))}&limit=25&order_by=members&sort=desc`)
        .then(r => r.ok ? r.json() : {data: []})
        .catch(() => ({data: []}))
    );
    
    // BÚSQUEDA 5: Por favoritos (más amados)
    searches.push(
      fetch(`https://api.jikan.moe/v4/anime?q=${encodeURIComponent(searchTerms.slice(4, 7).join(" "))}&limit=25&order_by=favorites&sort=desc`)
        .then(r => r.ok ? r.json() : {data: []})
        .catch(() => ({data: []}))
    );

    const results = await Promise.all(searches);
    
    // Combinar todos los resultados
    results.forEach(data => {
      if (data && data.data && Array.isArray(data.data)) {
        allResults.push(...data.data);
      }
    });

    // Eliminar duplicados por ID
    const uniqueAnimes = [];
    const seenIds = new Set();
    
    allResults.forEach(anime => {
      if (anime && anime.mal_id && !seenIds.has(anime.mal_id)) {
        seenIds.add(anime.mal_id);
        uniqueAnimes.push(anime);
      }
    });

    // Calcular puntuación de coincidencia MEJORADA
    const scoredResults = uniqueAnimes.map(anime => {
      const animeText = `
        ${anime.title || ''} 
        ${anime.title_english || ''} 
        ${anime.title_japanese || ''}
        ${anime.synopsis || ''} 
        ${anime.genres?.map(g => g.name).join(' ') || ''}
        ${anime.themes?.map(t => t.name).join(' ') || ''}
        ${anime.demographics?.map(d => d.name).join(' ') || ''}
        ${anime.studios?.map(s => s.name).join(' ') || ''}
        ${anime.producers?.map(p => p.name).join(' ') || ''}
      `.toLowerCase();

      let matchScore = 0;
      let exactMatches = 0;
      
      // Contar coincidencias con palabras expandidas
      expandedWords.forEach(word => {
        const escapedWord = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        const regex = new RegExp(`\\b${escapedWord}\\b`, 'i');
        if (regex.test(animeText)) {
          matchScore += 2;
          if (queryWords.includes(word)) {
            exactMatches++;
          }
        }
      });

      // Bonus por coincidencias exactas de palabras originales
      matchScore += exactMatches * 5;

      // Bonus por rating alto (calidad)
      if (anime.score && anime.score >= 9) {
        matchScore += 3;
      } else if (anime.score && anime.score >= 8) {
        matchScore += 2;
      } else if (anime.score && anime.score >= 7) {
        matchScore += 1;
      }
      
      // Bonus por popularidad (top animes)
      if (anime.popularity && anime.popularity <= 100) {
        matchScore += 3;
      } else if (anime.popularity && anime.popularity <= 500) {
        matchScore += 2;
      } else if (anime.popularity && anime.popularity <= 1000) {
        matchScore += 1;
      }
      
      // Bonus por muchos miembros (muy visto)
      if (anime.members && anime.members > 1000000) {
        matchScore += 2;
      } else if (anime.members && anime.members > 500000) {
        matchScore += 1;
      }
      
      // Bonus por favoritos (muy querido)
      if (anime.favorites && anime.favorites > 50000) {
        matchScore += 2;
      } else if (anime.favorites && anime.favorites > 10000) {
        matchScore += 1;
      }
      
      // Bonus por animes recientes (2020+)
      const currentYear = new Date().getFullYear();
      const animeYear = anime.year || (anime.aired?.from ? new Date(anime.aired.from).getFullYear() : 0);
      if (animeYear >= currentYear - 2) {
        matchScore += 2; // Muy reciente
      } else if (animeYear >= currentYear - 5) {
        matchScore += 1; // Reciente
      }

      return {
        title: anime.title_english || anime.title,
        titleJapanese: anime.title_japanese || anime.title,
        genres: anime.genres?.map(g => g.name) || [],
        themes: anime.themes?.map(t => t.name) || [],
        demographics: anime.demographics?.map(d => d.name) || [],
        description: anime.synopsis ? 
          (anime.synopsis.length > 240 ? anime.synopsis.substring(0, 240) + '...' : anime.synopsis) : 
          'No description available. Click to view more details on MyAnimeList.',
        rating: anime.score || 0,
        year: animeYear || 'N/A',
        episodes: anime.episodes || '?',
        image: anime.images?.jpg?.large_image_url || anime.images?.jpg?.image_url,
        url: anime.url,
        malId: anime.mal_id,
        type: anime.type || 'TV',
        status: anime.status || '',
        matchScore: matchScore,
        popularity: anime.popularity || 99999,
        members: anime.members || 0,
        favorites: anime.favorites || 0
      };
    });

    // Ordenar por relevancia (matchScore) y luego por rating
    return scoredResults
      .filter(anime => anime.matchScore > 0)
      .sort((a, b) => {
        if (b.matchScore !== a.matchScore) {
          return b.matchScore - a.matchScore;
        }
        if (b.rating !== a.rating) {
          return b.rating - a.rating;
        }
        return b.members - a.members;
      })
      .slice(0, 30); // Mostrar hasta 30 resultados

  } catch (error) {
    console.error('Error:', error);
    return [];
  }
}

// ====================================
// MOSTRAR RESULTADOS
// ====================================

function displayResults(results) {
  animeGrid.innerHTML = "";
  
  if (results.length === 0) {
    matchInfo.innerHTML = `
      <span style="font-size: 3rem;">😕</span><br>
      <strong>No animes found matching your search.</strong><br>
      <small style="opacity: 0.8;">Try different keywords or browse our complete collection:</small><br>
      <a href="https://ww3.animeonline.ninja/genero/anime-castellano/" target="_blank" rel="noopener" style="display: inline-block; margin-top: 1rem; padding: 0.8rem 2rem; background: var(--warning); color: white; text-decoration: none; border-radius: 10px; font-weight: 600;">🌐 Browse All Animes</a>
    `;
    resultsSection.classList.add("show");
    return;
  }

  matchInfo.innerHTML = `
    <span style="font-size: 2.5rem;">✨</span><br>
    Found <strong style="background: var(--accent); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 1.3rem;">${results.length}</strong> perfect matches for you!
  `;

  results.forEach((anime, index) => {
    const card = document.createElement("div");
    card.classList.add("anime-card");
    card.style.animationDelay = `${index * 0.05}s`;
    
    const allTags = [...anime.genres, ...anime.themes, ...anime.demographics].slice(0, 7);
    const genresHTML = allTags.map(g => `<span class="genre-tag">${g}</span>`).join("");
    
    // Determinar color del match score
    let scoreColor = '#667eea';
    if (anime.matchScore >= 20) scoreColor = '#11998e';
    else if (anime.matchScore >= 15) scoreColor = '#667eea';
    else if (anime.matchScore >= 10) scoreColor = '#4facfe';
    
    card.innerHTML = `
      ${anime.image ? `<img src="${anime.image}" alt="${anime.title}" class="anime-image" loading="lazy" onerror="this.src='https://via.placeholder.com/300x400/667eea/ffffff?text=${encodeURIComponent(anime.title)}'">` : `<div style="width: 100%; height: 400px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">No Image</div>`}
      <div class="anime-content">
        <div class="match-score" style="background: ${scoreColor};">🎯 ${anime.matchScore}% Match</div>
        <h3 class="anime-title">${anime.title}</h3>
        ${anime.titleJapanese !== anime.title ? `<p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">${anime.titleJapanese}</p>` : ''}
        <div class="anime-genres">${genresHTML}</div>
        <p class="anime-description">${anime.description}</p>
        <div class="anime-meta">
          <span>📅 ${anime.year}</span>
          <span>📺 ${anime.episodes} eps</span>
          <span>⭐ ${anime.rating ? anime.rating.toFixed(1) : 'N/A'}</span>
          <span>📊 ${anime.type}</span>
          ${anime.status ? `<span>📡 ${anime.status}</span>` : ''}
        </div>
        <div class="anime-links">
          <a href="${anime.url}" target="_blank" rel="noopener" class="anime-link mal" title="View on MyAnimeList">📋 MAL Info</a>
          <a href="${getWatchLink(anime.title)}" target="_blank" rel="noopener" class="anime-link watch" title="Watch Free Online">▶️ Watch Free</a>
        </div>
      </div>
    `;
    animeGrid.appendChild(card);
  });

  resultsSection.classList.add("show");
  resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// ====================================
// SUBMIT FORM (BUSCAR)
// ====================================

searchForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  searchBtn.classList.add("loading");
  resultsSection.classList.remove("show");

  try {
    const query = searchInput.value.trim();
    
    if (!query) {
      alert('Please enter a description of the anime you want to find!');
      searchBtn.classList.remove("loading");
      return;
    }
    
    saveToHistory(query);
    
    // Pequeño delay para evitar rate limiting de la API
    await new Promise(resolve => setTimeout(resolve, 500));
    
    const results = await searchAnimeAPI(query);
    displayResults(results);
    
  } catch (error) {
    console.error('Error:', error);
    matchInfo.innerHTML = `
      <span style="font-size: 3rem;">⚠️</span><br>
      <strong>Error searching animes.</strong><br>
      <small>Please try again in a few seconds. If the problem persists, try browsing our complete collection.</small><br>
      <a href="https://ww3.animeonline.ninja/genero/anime-castellano/" target="_blank" rel="noopener" style="display: inline-block; margin-top: 1rem; padding: 0.8rem 2rem; background: var(--warning); color: white; text-decoration: none; border-radius: 10px; font-weight: 600;">🌐 Browse All Animes</a>
    `;
    resultsSection.classList.add("show");
  } finally {
    searchBtn.classList.remove("loading");
  }
});

// ====================================
// CONSOLE LOG INICIAL
// ====================================

console.log('%c🎌 AnimeAI v3.0 - Enhanced Edition', 'color: #667eea; font-size: 20px; font-weight: bold;');
console.log('%c✨ Features:', 'color: #4facfe; font-size: 14px; font-weight: bold;');
console.log('  • 40,000+ anime database');
console.log('  • Multi-language search (English, Spanish, Hindi, Arabic & more)');
console.log('  • AI-powered matching algorithm');
console.log('  • 5 simultaneous API searches for better coverage');
console.log('  • Smart synonym expansion system');
console.log('  • Free streaming links');
console.log('  • Search history with localStorage');
console.log('%c🔍 Powered by Jikan API (MyAnimeList)', 'color: #11998e; font-size: 12px;');
</script>
</body>
</html>